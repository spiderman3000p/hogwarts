(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5kGd":function(t,e,a){"use strict";a.r(e),a.d(e,"StudentsModule",function(){return k});var r=a("ofXK"),n=a("tyNb"),o=a("3Pt+");class s{constructor(){this.actor="",this.alive=!1,this.ancestry="",this.dateOfBirth="",this.eyeColour="",this.gender="",this.hairColour="",this.hogwartsStaff=!1,this.hogwartsStudent=!1,this.house="",this.image="",this.name="",this.patronus="",this.species="",this.yearOfBirth=0}}var i=a("fXoL"),c=a("0IaG"),b=a("dNgK"),l=a("kmnG"),u=a("qFsG"),d=a("iadO"),m=a("bTqV");let f=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.fb=e,this.snackBar=a,this.uploadProgress=null,this.form=this.fb.group({name:["",o.m.required],actor:["",o.m.required],patronus:["",o.m.required],dateOfBirth:["",o.m.required],image:["",o.m.required]})}ngOnInit(){}onSubmit(){if(!this.form.valid)return;const t=this.form.value;if(console.log("form values",t),"object"!=typeof t.dateOfBirth)return void this.snackBar.open("Error con la fecha de nacimiento","OK",{duration:2e3});const e=t.dateOfBirth;t.dateOfBirth=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`;let a=new s;a=Object.assign(a,t),a.yearOfBirth=e.getFullYear(),console.log("new student",a);const r=JSON.parse(localStorage.getItem("hogwartsStudents")||"[]");Array.isArray(r)&&r.push(a),localStorage.setItem("hogwartsStudents",JSON.stringify(r)),this.snackBar.open("Estudiante agregado"),this.dialogRef.close(a)}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(c.f),i.Mb(o.c),i.Mb(b.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-add-student-dialog"]],decls:32,vars:3,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],[1,"p-24"],[1,"w-100"],["matInput","","formControlName","name"],["matInput","","formControlName","actor"],["matInput","","formControlName","patronus"],["matInput","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","formControlName","image","type","url"],["align","end"],["mat-button","","mat-dialog-close","","type","button"],["mat-button","","type","submit"]],template:function(t,e){if(1&t&&(i.Sb(0,"h2",0),i.yc(1,"Agregar Estudiante"),i.Rb(),i.Sb(2,"form",1),i.ac("ngSubmit",function(){return e.onSubmit()}),i.Sb(3,"mat-dialog-content",2),i.Sb(4,"mat-form-field",3),i.Sb(5,"mat-label"),i.yc(6,"Nombre"),i.Rb(),i.Nb(7,"input",4),i.Rb(),i.Sb(8,"mat-form-field",3),i.Sb(9,"mat-label"),i.yc(10,"Actor"),i.Rb(),i.Nb(11,"input",5),i.Rb(),i.Sb(12,"mat-form-field",3),i.Sb(13,"mat-label"),i.yc(14,"Patronus"),i.Rb(),i.Nb(15,"input",6),i.Rb(),i.Sb(16,"mat-form-field",3),i.Sb(17,"mat-label"),i.yc(18,"Birth Date"),i.Rb(),i.Nb(19,"input",7),i.Nb(20,"mat-datepicker-toggle",8),i.Nb(21,"mat-datepicker",null,9),i.Rb(),i.Sb(23,"mat-form-field",3),i.Sb(24,"mat-label"),i.yc(25,"Url Imagen"),i.Rb(),i.Nb(26,"input",10),i.Rb(),i.Rb(),i.Sb(27,"mat-dialog-actions",11),i.Sb(28,"button",12),i.yc(29,"Cancelar"),i.Rb(),i.Sb(30,"button",13),i.yc(31,"Guardar"),i.Rb(),i.Rb(),i.Rb()),2&t){const t=i.nc(22);i.Bb(2),i.jc("formGroup",e.form),i.Bb(17),i.jc("matDatepicker",t),i.Bb(1),i.jc("for",t)}},directives:[c.g,o.n,o.j,o.e,c.d,l.b,l.e,u.b,o.b,o.i,o.d,d.b,d.d,l.f,d.a,c.b,m.a,c.c],styles:[".upload-input[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),t})();var h=a("AytR"),p=a("tk/3");let g=(()=>{class t{constructor(t){this.httpClient=t}getStudents(){return this.httpClient.get(h.a.API_BASE_URL+"/characters/students")}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(p.a))},t.\u0275prov=i.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=a("NFeN"),y=a("Wp6s"),R=a("XiUz");function w(t,e){if(1&t&&(i.Sb(0,"mat-card",5),i.Sb(1,"mat-card-header"),i.Sb(2,"mat-card-title"),i.yc(3),i.Rb(),i.Sb(4,"mat-card-subtitle"),i.yc(5),i.Rb(),i.Rb(),i.Nb(6,"div",6),i.Nb(7,"mat-card-content"),i.Sb(8,"mat-card-actions"),i.Sb(9,"button",7),i.yc(10),i.Rb(),i.Sb(11,"button",7),i.yc(12),i.Rb(),i.Rb(),i.Rb()),2&t){const t=e.$implicit,a=i.ec();i.Bb(3),i.zc(t.name),i.Bb(2),i.zc(t.actor),i.Bb(1),i.uc("background-image","url("+t.image+")"),i.jc("title","Photo of "+t.name),i.Bb(4),i.zc(t.yearOfBirth>0?a.year-t.yearOfBirth+" a\xf1os":"Edad desc"),i.Bb(2),i.zc(t.patronus.length>0?"Patronus "+t.patronus:"Sin patronus")}}let N=(()=>{class t{constructor(t,e){this.studentsService=t,this.dialog=e,this.students=[],this.year=(new Date).getFullYear()}ngOnInit(){this.loadStudents()}loadStudents(){this.studentsService.getStudents().subscribe(t=>{console.log("estudiantes remotos",t);const e=JSON.parse(localStorage.getItem("hogwartsStudents")||"[]");console.log("estudiantes en local",e),Array.isArray(e)&&e.length>0&&(t=t.concat(e)),this.students=t})}showAddDialog(){this.dialog.open(f,{width:"400px"}).afterClosed().subscribe(t=>{console.log("Dialog result: "+t),t&&this.students.push(t)})}}return t.\u0275fac=function(e){return new(e||t)(i.Mb(g),i.Mb(c.a))},t.\u0275cmp=i.Gb({type:t,selectors:[["app-students"]],decls:14,vars:1,consts:[["mat-fab","","color","primary",1,"main-button",3,"click"],[1,"pt-0"],[1,"banner","students-bg"],["fxLayout","row wrap","fxLayoutAlign","space-around strech","fxLayoutGap","20"],["class","item-card mt-20","fxFlex.lt-sm","100","fxFlex.lt-md","50","fxFlex.lt-lg","40",4,"ngFor","ngForOf"],["fxFlex.lt-sm","100","fxFlex.lt-md","50","fxFlex.lt-lg","40",1,"item-card","mt-20"],[1,"item-header-image",3,"title"],["mat-button",""]],template:function(t,e){1&t&&(i.Sb(0,"button",0),i.ac("click",function(){return e.showAddDialog()}),i.Sb(1,"mat-icon"),i.yc(2,"add"),i.Rb(),i.Rb(),i.Sb(3,"mat-card",1),i.Nb(4,"div",2),i.Sb(5,"mat-card-header"),i.Sb(6,"mat-card-title"),i.yc(7,"Students"),i.Rb(),i.Nb(8,"mat-card-subtitle"),i.Rb(),i.Sb(9,"mat-card-content"),i.Sb(10,"div",3),i.xc(11,w,13,7,"mat-card",4),i.Rb(),i.Rb(),i.Nb(12,"mat-card-actions"),i.Nb(13,"mat-card-footer"),i.Rb()),2&t&&(i.Bb(11),i.jc("ngForOf",e.students))},directives:[m.a,S.a,y.a,y.e,y.h,y.g,y.c,R.c,R.b,R.d,r.j,y.b,y.d,R.a],styles:[""]}),t})();const B=[{path:"",component:N},{path:"add",component:N}];let v=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[n.d.forChild(B)],n.d]}),t})();var O=a("YUcS"),x=a("jAig");let k=(()=>{class t{}return t.\u0275mod=i.Kb({type:t}),t.\u0275inj=i.Jb({factory:function(e){return new(e||t)},imports:[[r.c,v,O.a,o.l,p.b,x.a]]}),t})()}}]);